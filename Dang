local UI = {}

local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")
local TweenService = game:GetService("TweenService")
local UIS = game:GetService("UserInputService")

-- ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "SapiHub"
ScreenGui.IgnoreGuiInset = true
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = PlayerGui

-- Blur
local Blur = Instance.new("BlurEffect")
Blur.Size = 0
Blur.Parent = game.Lighting

local function blurOn()
    TweenService:Create(Blur, TweenInfo.new(0.4, Enum.EasingStyle.Sine), {Size = 12}):Play()
end
local function blurOff()
    TweenService:Create(Blur, TweenInfo.new(0.4, Enum.EasingStyle.Sine), {Size = 0}):Play()
end

-- Main Frame with border & gradient
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 400, 0, 340)
MainFrame.Position = UDim2.new(0.5, -200, 0.35, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
MainFrame.BorderSizePixel = 2
MainFrame.BorderColor3 = Color3.fromRGB(80, 80, 80)
MainFrame.Parent = ScreenGui

local MainGradient = Instance.new("UIGradient")
MainGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(40, 40, 40)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 20, 20))
}
MainGradient.Rotation = 45
MainGradient.Parent = MainFrame

local scale = Instance.new("UIScale")
scale.Parent = MainFrame
scale.Scale = (UIS.TouchEnabled and not UIS.KeyboardEnabled) and 0.7 or 1

-- Rounded corners
local Corner = Instance.new("UICorner")
Corner.CornerRadius = UDim.new(0, 15)
Corner.Parent = MainFrame

-- Shadow
local Shadow = Instance.new("ImageLabel")
Shadow.Name = "Shadow"
Shadow.Parent = MainFrame
Shadow.AnchorPoint = Vector2.new(0.5, 0.5)
Shadow.Position = UDim2.new(0.5, 0, 0.5, 6)
Shadow.Size = UDim2.new(1, 40, 1, 40)
Shadow.BackgroundTransparency = 1
Shadow.Image = "rbxassetid://6015897843"
Shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
Shadow.ImageTransparency = 0.5
Shadow.ScaleType = Enum.ScaleType.Slice
Shadow.SliceCenter = Rect.new(49, 49, 450, 450)

-- Title
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, 0, 0, 50)
Title.BackgroundTransparency = 0
Title.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Title.BorderSizePixel = 1
Title.BorderColor3 = Color3.fromRGB(100, 100, 100)
Title.Font = Enum.Font.GothamBold
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextScaled = true
Title.Text = "Sapi Hub | Auto Bounty"
Title.Parent = MainFrame

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 15)
TitleCorner.Parent = Title

-- Message
local Message = Instance.new("TextLabel")
Message.Name = "Message"
Message.Parent = MainFrame
Message.Position = UDim2.new(0, 12, 0, 60)
Message.Size = UDim2.new(1, -24, 0, 28)
Message.BackgroundTransparency = 1
Message.TextColor3 = Color3.fromRGB(220, 220, 220)
Message.Font = Enum.Font.GothamSemibold
Message.TextScaled = true
Message.Text = ">_<"

-- Target List Label
local TargetListLabel = Instance.new("TextLabel")
TargetListLabel.Name = "TargetListLabel"
TargetListLabel.Parent = MainFrame
TargetListLabel.Position = UDim2.new(0, 12, 0, 95)
TargetListLabel.Size = UDim2.new(1, -24, 0, 30)
TargetListLabel.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
TargetListLabel.BorderSizePixel = 1
TargetListLabel.BorderColor3 = Color3.fromRGB(100, 100, 100)
TargetListLabel.TextColor3 = Color3.new(1, 1, 1)
TargetListLabel.TextScaled = true
TargetListLabel.Text = "Targets: none"
local TC1 = Instance.new("UICorner")
TC1.CornerRadius = UDim.new(0, 12)
TC1.Parent = TargetListLabel

-- Current Target Label
local CurrentTargetLabel = Instance.new("TextLabel")
CurrentTargetLabel.Name = "CurrentTargetLabel"
CurrentTargetLabel.Parent = MainFrame
CurrentTargetLabel.Position = UDim2.new(0, 12, 0, 135)
CurrentTargetLabel.Size = UDim2.new(1, -24, 0, 30)
CurrentTargetLabel.BackgroundColor3 = Color3.fromRGB(60, 140, 255)
CurrentTargetLabel.BorderSizePixel = 1
CurrentTargetLabel.BorderColor3 = Color3.fromRGB(100, 200, 255)
CurrentTargetLabel.TextColor3 = Color3.new(1, 1, 1)
CurrentTargetLabel.TextScaled = true
CurrentTargetLabel.Text = "Current Target: none"
local TC2 = Instance.new("UICorner")
TC2.CornerRadius = UDim.new(0, 12)
TC2.Parent = CurrentTargetLabel

-- Notification system
local NotifyColors = {
    success = Color3.fromRGB(60, 220, 90),
    error = Color3.fromRGB(220, 80, 80),
    warn = Color3.fromRGB(240, 180, 70),
    info = Color3.fromRGB(80, 180, 240)
}

function UI.ShowNotification(text, nType)
    nType = nType or "info"
    if not UI.NotificationLabel then
        UI.NotificationLabel = Instance.new("TextLabel")
        UI.NotificationLabel.Parent = MainFrame
        UI.NotificationLabel.Size = UDim2.new(1, -24, 0, 32)
        UI.NotificationLabel.Position = UDim2.new(0, 12, 0, 180)
        UI.NotificationLabel.Font = Enum.Font.GothamMedium
        UI.NotificationLabel.TextScaled = true
        local C = Instance.new("UICorner", UI.NotificationLabel)
        C.CornerRadius = UDim.new(0, 12)
    end
    local Note = UI.NotificationLabel
    Note.BackgroundColor3 = NotifyColors[nType]
    Note.TextTransparency = 0
    Note.BackgroundTransparency = 0
    Note.Text = text

    task.spawn(function()
        task.wait(2)
        for i = 1, 20 do
            Note.TextTransparency = i / 20
            Note.BackgroundTransparency = i / 20
            task.wait(0.03)
        end
        Note.Text = "No News"
        Note.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        Note.TextTransparency = 0.3
        Note.BackgroundTransparency = 0.3
    end)
end

-- Buttons with gradient & border
local function createButton(name, posX, posY, sizeX, sizeY, bgColor, text)
    local btn = Instance.new("TextButton")
    btn.Name = name
    btn.Parent = MainFrame
    btn.Size = UDim2.new(0, sizeX, 0, sizeY)
    btn.Position = UDim2.new(0, posX, 0, posY)
    btn.BackgroundColor3 = bgColor
    btn.BorderSizePixel = 1
    btn.BorderColor3 = Color3.fromRGB(100, 100, 100)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.GothamBold
    btn.TextScaled = true
    btn.Text = text
    local corner = Instance.new("UICorner", btn)
    corner.CornerRadius = UDim.new(0, 12)
    return btn
end

local SkipButton = createButton("SkipButton", 12, 280, 120, 35, Color3.fromRGB(200, 60, 60), "Skip Player")
local SpectateButton = createButton("SpectateButton", 150, 280, 150, 35, Color3.fromRGB(60, 140, 255), "Spectate: OFF")

-- Dragging (same as before)
local dragging, dragStart, startPos = false, nil, nil
local function startDrag(input)
    dragging = true
    dragStart = input.Position
    startPos = MainFrame.Position
    input.Changed:Connect(function()
        if input.UserInputState == Enum.UserInputState.End then
            dragging = false
            blurOff()
        end
    end)
    blurOn()
end

local function updateDrag(input)
    if dragging then
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end

MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        startDrag(input)
    end
end)
UIS.InputChanged:Connect(updateDrag)

return UI
